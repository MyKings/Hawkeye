"use strict";(self["webpackChunkHunter"]=self["webpackChunkHunter"]||[]).push([[133],{8133:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"result"},[e("Dashboard",{attrs:{trend:t.trendData}}),e("el-card",{attrs:{shadow:"never"}},[e("el-form",{staticClass:"filter-panel"},[e("el-row",{attrs:{type:t.mobileClient?"":"flex"}},[e("el-col",{attrs:{xs:24,sm:24,md:24,lg:6,xl:6}},[e("el-form-item",{attrs:{label:"标签"}},[e("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择关键字"},on:{change:t.handleFilter,focus:function(e){return t.fetchStatisticsData("tag")}},model:{value:t.filters.tag,callback:function(e){t.$set(t.filters,"tag",e)},expression:"filters.tag"}},t._l(t.statistics.tag,(function(a){return e("el-option",{key:a._id,attrs:{value:a._id}},[t._v(" "+t._s(a._id)+" "),e("span",{staticClass:"tag-count"},[t._v(t._s(a.value))])])})),1)],1)],1),e("el-col",{attrs:{xs:24,sm:24,md:24,lg:6,xl:6}},[e("el-form-item",{attrs:{label:"语言"}},[e("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择语言"},on:{change:t.handleFilter,focus:function(e){return t.fetchStatisticsData("language")}},model:{value:t.filters.language,callback:function(e){t.$set(t.filters,"language",e)},expression:"filters.language"}},t._l(t.statistics.language,(function(a){return e("el-option",{key:a._id,attrs:{value:a._id}},[t._v(" "+t._s(a._id)+" "),e("span",{staticClass:"tag-count"},[t._v(t._s(a.value))])])})),1)],1)],1),e("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[e("el-form-item",{attrs:{label:"状态"}},[e("el-radio-group",{attrs:{size:"mini",fill:"#DDDDDD"},on:{change:t.handleStatusFilter},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},[e("el-radio-button",{attrs:{label:"不限"}},[e("i",{staticClass:"iconfont icon-search"}),t._v("不限 ")]),e("el-radio-button",{attrs:{label:"待审"}},[e("i",{staticClass:"iconfont icon-feedback_fill"}),t._v("待审 ")]),e("el-radio-button",{attrs:{label:"确认"}},[e("i",{staticClass:"iconfont icon-flag_fill"}),t._v("确认 ")]),e("el-radio-button",{attrs:{label:"误报"}},[e("i",{staticClass:"iconfont icon-success_fill"}),t._v("误报 ")])],1)],1)],1)],1)],1),e("ResultsTable",{attrs:{results:t.leakagesData},on:{change:t.handleChange}}),t.leakagesData?e("div",{staticClass:"page"},[e("el-pagination",{attrs:{"current-page":t.from,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total,prev, pager, next, sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)],1)},i=[];a(7658);const l=()=>a.e(434).then(a.bind(a,7434)),r=()=>a.e(317).then(a.bind(a,3317));var n={data(){return{statistics:{tag:[],language:[]},filters:{status:this.$route.query.status||"待审",tag:this.$route.query.tag||"",language:this.$route.query.language||""},trendData:{},leakagesData:[],total:10}},computed:{mobileClient(){return document.documentElement.clientWidth<document.documentElement.clientHeight},status(){return this.$route.query.status?"不限"===this.$route.query.status?{}:"待审"===this.$route.query.status?{security:0,desc:{$exists:!1}}:"确认"===this.$route.query.status?{security:0,desc:{$exists:!0}}:"误报"===this.$route.query.status?{security:1}:void 0:{security:0,desc:{$exists:!1}}},from(){return this.$route.query.page?parseInt(this.$route.query.page,10):1},tag(){return this.$route.query.tag?this.$route.query.tag:this.$route.params.tag?this.$route.params.tag:""},language(){return this.$route.query.language?this.$route.query.language:null},limit(){return this.$route.query.limit?parseInt(this.$route.query.limit,10):10}},methods:{handleStatusFilter(t){this.$router.push({name:"index",query:{page:1,limit:10,tag:this.filters.tag,language:this.filters.language,status:t}})},handleFilter(){this.$router.push({name:"index",query:{page:1,limit:10,tag:this.filters.tag,language:this.filters.language,status:this.filters.status}})},fetchStatisticsData(t){this.axios.get(this.api.statistic,{params:{by:t,tag:this.filters.tag}}).then((e=>{this.statistics[t]=e.data.result})).catch((t=>{this.$message.error(t.toString())}))},handleSizeChange(t){this.$router.push({name:"index",query:{page:1,limit:t,tag:this.tag,language:this.language,status:this.filters.status}})},handleCurrentChange(t){this.$router.push({name:"index",query:{page:t,limit:this.limit,tag:this.tag,language:this.language,status:this.filters.status}})},handleChange(){this.fetchTrend(),this.fetchLeakagesData()},fetchLeakagesData(){this.axios.get(this.api.leakage,{params:{status:this.status,tag:this.filters.tag,language:this.language,limit:this.limit,from:this.from}}).then((t=>{this.leakagesData=t.data.result,this.total=t.data.total})).catch((t=>{this.$message.error(t.toString())}))},fetchTrend(){this.axios.get(this.api.trend,{params:{tag:this.tag}}).then((t=>{this.trendData=t.data.result})).catch((t=>{this.$message.error(t.toString())}))}},components:{Dashboard:l,ResultsTable:r},mounted(){this.fetchTrend(),this.fetchLeakagesData()},watch:{$route(t,e){this.filters.tag=t.query.tag||"",this.fetchLeakagesData(),this.fetchTrend()}}},u=n,o=a(1001),g=(0,o.Z)(u,s,i,!1,null,"5d72b11d",null),h=g.exports}}]);
//# sourceMappingURL=133.04cf979e.js.map